<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Renacimiento Plenisista ¬∑ Ciclo 30 d√≠as</title>
  <meta name="theme-color" content="#0b0b0f">
  <style>
    :root{
      --bg:#0b0b0f;
      --bg2:#121218;
      --ink:#f5f6ff;
      --soft:#aeb2c7;
      --ring:#2a2a36;
      --ok:#44d48a;
      --warn:#ff8a5b;
      --cyan:#63c9ff;
      --gold:#ffd166;
      --shadow: 0 12px 40px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0; background:radial-gradient(900px 600px at 0% -10%, #16203d 0%, transparent 55%) , radial-gradient(900px 600px at 100% 110%, #2b1e43 0%, transparent 55%), var(--bg); color:var(--ink); font-family: ui-sans-serif, -apple-system, "SF Pro Text", Segoe UI, Roboto, Helvetica, Arial}
    header.top{position:sticky; top:0; z-index:5; padding:14px 16px; background:linear-gradient(180deg, rgba(11,11,15,.95), rgba(11,11,15,.7) 70%, transparent); border-bottom:1px solid var(--ring); backdrop-filter: blur(6px)}
    .brand{display:flex; align-items:center; gap:12px}
    .logo{width:40px; height:40px; border-radius:12px; display:grid; place-items:center; color:#0b0b0f; font-weight:900; background: radial-gradient(circle at 30% 30%, var(--cyan), transparent 60%), radial-gradient(circle at 70% 70%, var(--gold), transparent 55%), linear-gradient(135deg, #1b1f3f, #0f1224); box-shadow:var(--shadow)}
    h1{margin:0; font-size:clamp(18px,4vw,28px)}
    .sub{color:var(--soft); font-size:.95rem}
    .head-actions{display:flex; gap:8px; flex-wrap:wrap; margin-top:8px}
    button{appearance:none; border:1px solid var(--ring); background:var(--bg2); color:var(--ink); padding:10px 14px; border-radius:12px; cursor:pointer; box-shadow:var(--shadow)}
    button:hover{transform:translateY(-1px)}
    .ok{color:var(--ok); border-color:#274a37}
    .warn{color:var(--warn); border-color:#553028}
    .ghost{background:transparent}
    .wrap{max-width:1200px; margin:0 auto; padding:16px; padding-bottom:120px}
    .card{background:rgba(17,20,40,.72); border:1px solid var(--ring); border-radius:16px; box-shadow:var(--shadow)}
    .pad{padding:16px}
    .stats{display:flex; gap:8px; flex-wrap:wrap; margin-bottom:10px}
    .stat{background:rgba(20,24,50,.5); border:1px solid var(--ring); padding:10px 12px; border-radius:12px; color:var(--soft)}
    .stat b{color:var(--ink)}
    .bar{width:100%; height:10px; background:#15162a; border:1px solid var(--ring); border-radius:999px; overflow:hidden}
    .bar>div{height:100%; width:0%; background:linear-gradient(90deg, var(--ok), #79ffbf)}
    /* grid */
    .grid{display:grid; grid-template-columns: repeat(4,1fr); gap:12px}
    @media (min-width:560px){ .grid{grid-template-columns: repeat(6,1fr)} }
    @media (min-width:900px){ .grid{grid-template-columns: repeat(8,1fr)} }
    .day{min-height:120px; display:flex; flex-direction:column; gap:8px; justify-content:space-between; position:relative; padding:14px; border-radius:14px; border:1px solid var(--ring); background:linear-gradient(180deg, rgba(23,26,54,.9), rgba(12,14,26,.9)); box-shadow:var(--shadow)}
    .topline{display:flex; align-items:center; justify-content:space-between}
    .badge{font-size:.72rem; border:1px solid var(--ring); padding:3px 8px; border-radius:999px; color:var(--soft)}
    .title{font-size:.95rem; font-weight:600}
    .phrase{font-size:.86rem; color:#e2e8ff; line-height:1.35; max-height:3.3em; overflow:hidden; text-overflow:ellipsis}
    .actions{display:flex; align-items:center; justify-content:space-between; gap:8px}
    .open{background:transparent; border:1px dashed var(--ring); color:var(--cyan); padding:8px 12px; border-radius:10px}
    .phase{font-size:.75rem; color:var(--soft)}
    .done{border-color: rgba(68,212,138,.5); background: linear-gradient(180deg, rgba(22,40,30,.85), rgba(14,22,17,.85))}
    .done::after{content:"‚úî"; position:absolute; right:10px; bottom:10px; color:var(--ok)}
    footer.site{position:fixed; bottom:0; left:0; right:0; background:linear-gradient(0deg, rgba(11,11,15,1), rgba(11,11,15,.85) 70%, transparent); backdrop-filter: blur(6px)}
    .foot{max-width:1200px; margin:0 auto; display:flex; align-items:center; justify-content:space-between; gap:10px; padding:10px 16px; color:var(--soft)}
    .brand2{color:var(--ink)}

    /* modal */
    .backdrop{position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.6); z-index:10; padding:16px}
    .modal{width:min(820px, 100%); background:rgba(17,20,40,1); border:1px solid var(--ring); border-radius:18px; overflow:hidden; box-shadow:var(--shadow)}
    .modal header{display:flex; align-items:center; justify-content:space-between; gap:8px; padding:16px; background:#111323; border-bottom:1px solid var(--ring)}
    .modal h2{margin:0; font-size:1.05rem}
    .content{padding:16px; display:grid; gap:14px}
    .chips{display:flex; gap:8px; flex-wrap:wrap}
    .chip{border:1px solid var(--ring); border-radius:999px; padding:4px 10px; color:var(--soft); font-size:.85rem}
    .m-phrase{font-weight:600; line-height:1.4}
    .modules{display:grid; grid-template-columns:1fr; gap:12px}
    @media (min-width:700px){ .modules{grid-template-columns:1fr 1fr} }
    .mod{border:1px solid var(--ring); border-radius:12px; padding:12px; background:rgba(22,24,44,.9)}
    .mod h3{margin:0 0 8px 0; font-size:1rem}
    .mod p{margin:6px 0 10px 0; color:#dee3ff; font-size:.95rem}
    .small{color:var(--soft); font-size:.86rem}
    .check{display:flex; align-items:center; gap:8px; margin-top:10px}
    .check input{width:20px; height:20px}
    .dp{display:flex; align-items:center; gap:10px; margin-top:8px}
    .dp .bar{height:12px; width:220px}
    .foot-modal{display:flex; align-items:center; justify-content:space-between; gap:8px; margin-top:6px; flex-wrap:wrap}
    .reward{color:var(--gold); font-weight:600}
  </style>
</head>
<body>
  <header class="top">
    <div class="brand">
      <div class="logo">‚òÖ</div>
      <div>
        <h1>RENACIMIENTO PLENISISTA</h1>
        <div class="sub">Ciclo de 30 d√≠as ¬∑ Inicio del ciclo: 18/10/2025</div>
        <div class="head-actions">
          <button id="btnToday" class="ghost">Ir al d√≠a de hoy</button>
          <button id="btnExport" class="ok">Exportar progreso</button>
          <button id="btnReset" class="warn">Reiniciar</button>
        </div>
      </div>
    </div>
  </header>

  <div class="wrap">
    <section class="card">
      <div class="pad">
        <div class="stats">
          <div class="stat">Progreso total: <b id="statPct">0%</b></div>
          <div class="stat">D√≠as completos: <b id="statDays">0/30</b></div>
          <div class="stat">Racha (desde d√≠a 1): <b id="statStreak">0</b></div>
        </div>
        <div class="bar"><div id="barTotal"></div></div>
      </div>
    </section>

    <section class="card">
      <div class="pad">
        <h2 style="margin:0 0 10px 0; font-size:1.05rem">Tu viaje de 30 d√≠as</h2>
        <div class="grid" id="grid"></div>
      </div>
    </section>
  </div>

  <footer class="site">
    <div class="foot">
      <div>¬© <span id="yy"></span> ¬∑ Creado para <span class="brand2">Agust√≠n Nicol√°s Almar</span></div>
      <div style="opacity:.8">‚ÄúElijo esta acci√≥n porque me hace pleno.‚Äù</div>
    </div>
  </footer>

  <!-- Modal d√≠a -->
  <div class="backdrop" id="backdrop" aria-hidden="true" role="dialog">
    <div class="modal">
      <header>
        <h2 id="mTitle">D√≠a</h2>
        <button id="mClose">Cerrar</button>
      </header>
      <div class="content">
        <div class="chips">
          <span class="chip" id="mPhase"></span>
          <span class="chip" id="mEnergy"></span>
          <span class="chip" id="mSymbol"></span>
        </div>
        <div class="m-phrase" id="mPhrase"></div>

        <div class="modules" id="modList"></div>

        <div class="foot-modal">
          <div class="dp">
            <div class="bar"><div id="mBar"></div></div>
            <span id="mPct">0%</span>
          </div>
          <div class="reward" id="mReward"></div>
        </div>
      </div>
    </div>
  </div>

<script>
(function(){
  const START_DATE = new Date('2025-10-18T00:00:00'); // inicio
  const KEY = 'renacimiento-plenisista-v5'; // storage limpio

  function mods(arr){
    let total = arr.reduce((s,m)=>s+(m.weight||0),0);
    if(total!==100 && total>0){
      arr = arr.map(m => ({...m, weight: Math.round((m.weight/total)*100)}));
    }
    return arr;
  }

  const days = [
    {n:1, title:"El Despertar del Prop√≥sito", phase:"üîµ Reencuentro", energy:"üåô Introspectiva", symbol:"üåü Origen",
      phrase:"No busco volver atr√°s, busco recordar qui√©n soy.",
      modules: mods([
        {type:"Reflexi√≥n", text:"¬øPor qu√© empec√© este camino? ¬øQu√© buscaba sanar/entender?", weight:25},
        {type:"Lectura", text:"Rele√© un fragmento del Plenisismo o un texto antiguo y subray√° una frase viva.", weight:25},
        {type:"Ritual", text:"Encend√© una vela o luz tenue y dec√≠: ‚ÄúHoy elijo volver a m√≠‚Äù.", weight:25},
        {type:"Registro", text:"Tres palabras que definan el 'yo' que quiere renacer.", weight:25}
      ]),
      reward:"Palabra desbloqueada: Origen"
    },
    {n:2, title:"Desintoxicaci√≥n Sensorial", phase:"üîµ Reencuentro", energy:"üçÉ Limpieza", symbol:"üå´Ô∏è Silencio",
      phrase:"El silencio tambi√©n habla de m√≠.",
      modules: mods([
        {type:"Acci√≥n", text:"24 h sin redes, reels, shorts ni porno. Solo uso funcional del celu.", weight:40},
        {type:"Movimiento", text:"Caminata sin auriculares ni objetivo. Sent√≠ el entorno.", weight:20},
        {type:"Reflexi√≥n", text:"A la noche: ¬øQu√© escuch√© hoy dentro m√≠o que no escuchaba hace tiempo?", weight:20},
        {type:"Cierre", text:"Agradec√© tres cosas simples de este d√≠a.", weight:20}
      ]),
      reward:"Palabra desbloqueada: Silencio"
    },
    {n:3, title:"Reencuentro con el Cuerpo", phase:"üîµ Reencuentro", energy:"üî• Vitalidad", symbol:"‚ö° Presencia",
      phrase:"Este cuerpo me sostiene; este cuerpo me pertenece.",
      modules: mods([
        {type:"Acci√≥n", text:"Gym o movimiento consciente. Objetivo: presencia, no rendimiento.", weight:40},
        {type:"Respiraci√≥n", text:"5 minutos de respiraci√≥n/escaneo corporal.", weight:20},
        {type:"Reflexi√≥n", text:"¬øQu√© parte de mi cuerpo pide cuidado?", weight:20},
        {type:"Ritual", text:"Cerr√° el d√≠a con ducha fr√≠a o meditaci√≥n breve.", weight:20}
      ]),
      reward:"Palabra desbloqueada: Presencia"
    },
    {n:4, title:"Carta al Yo del Fuego", phase:"üîµ Reencuentro", energy:"‚ù§Ô∏è Emocional", symbol:"üî• Llama interior",
      phrase:"Sigo siendo ese fuego, aunque hoy arda distinto.",
      modules: mods([
        {type:"Carta", text:"Escrib√≠ a tu 'yo fuego': qu√© so√±aba, qu√© quer√≠a construir.", weight:40},
        {type:"An√°lisis", text:"Subray√° las palabras m√°s vivas de la carta.", weight:30},
        {type:"Acci√≥n", text:"Respirar frente al espejo: 4-4-6 x 5 ciclos.", weight:20},
        {type:"Cierre", text:"Frase: ‚ÄúNo apagu√© el fuego; lo guard√© para cuando hiciera fr√≠o‚Äù.", weight:10}
      ]),
      reward:"S√≠mbolo desbloqueado: Llama interior"
    },
    {n:5, title:"Reconexi√≥n Espiritual", phase:"üîµ Reencuentro", energy:"üïäÔ∏è Calma", symbol:"‚ú® Mirada plena",
      phrase:"Miro la vida con los mismos ojos con los que ella me ve: los de amor.",
      modules: mods([
        {type:"Silencio", text:"15 minutos de silencio o meditaci√≥n.", weight:30},
        {type:"Credo", text:"Repet√≠ tu credo personal u oraci√≥n propia.", weight:30},
        {type:"Gratitud", text:"Agradec√© tres cosas reales (no ideales).", weight:20},
        {type:"Registro", text:"¬øQu√© parte de m√≠ necesita m√°s amor?", weight:20}
      ]),
      reward:"S√≠mbolo: Mirada plena"
    },
    {n:6, title:"Revisi√≥n Honesta", phase:"üîµ Reencuentro", energy:"üåò Orden interno", symbol:"üß≠ Claridad",
      phrase:"La honestidad depura: lo que drena se suelta; lo que enciende se cultiva.",
      modules: mods([
        {type:"Lista", text:"Anot√°: (1) lo que me drena (2) lo que me enciende (3) lo que ya no me representa.", weight:50},
        {type:"Depurar", text:"Tach√° lo que no quer√©s arrastrar al pr√≥ximo ciclo.", weight:25},
        {type:"Reflexi√≥n", text:"¬øQu√© parte de m√≠ estoy dispuesto a dejar morir?", weight:25}
      ]),
      reward:"Palabra: Claridad"
    },
    {n:7, title:"Cierre de Reencuentro", phase:"üîµ Reencuentro", energy:"‚òÄÔ∏è Renovadora", symbol:"üåÑ Despertar",
      phrase:"La plenitud no est√° en lo nuevo: est√° en mirar distinto.",
      modules: mods([
        {type:"Lectura", text:"Rele√© lo que escribiste esta semana.", weight:30},
        {type:"Resumen", text:"¬øQu√© aprend√≠ de m√≠ esta semana? (5 l√≠neas)", weight:30},
        {type:"Ritual", text:"Paseo lento o lavar manos con agua fr√≠a para 'soltar lo viejo'.", weight:20},
        {type:"Registro", text:"Una decisi√≥n concreta para la pr√≥xima fase.", weight:20}
      ]),
      reward:"S√≠mbolo: Despertar"
    },
    {n:8, title:"Definir el nuevo desaf√≠o", phase:"üü£ Expansi√≥n", energy:"üí™ Activadora", symbol:"ü™∂ Impulso",
      phrase:"Elijo un desaf√≠o que me da miedo‚Ä¶ y me enciende.",
      modules: mods([
        {type:"Reflexi√≥n", text:"¬øQu√© har√≠a si no tuviera miedo al error?", weight:30},
        {type:"Definici√≥n", text:"Escrib√≠ tu desaf√≠o en una frase visible.", weight:30},
        {type:"Acci√≥n", text:"Primera acci√≥n m√≠nima (5 minutos).", weight:30},
        {type:"Registro", text:"¬øQu√© emoci√≥n sent√≠ al decidirme? (miedo/entusiasmo)", weight:10}
      ]),
      reward:"Palabra: Impulso"
    },
    {n:9, title:"Acci√≥n peque√±a #1", phase:"üü£ Expansi√≥n", energy:"üî• Movimiento", symbol:"‚öôÔ∏è Constancia",
      phrase:"Hoy muevo una pieza, no todo el tablero.",
      modules: mods([
        {type:"Acci√≥n", text:"Una microacci√≥n hacia tu desaf√≠o que dependa 100% de vos.", weight:50},
        {type:"Reflexi√≥n", text:"¬øQu√© aprend√≠ hoy al mantener el ritmo?", weight:30},
        {type:"Cierre", text:"Frase: ‚ÄúMi energ√≠a crece cuando act√∫o sin esperar‚Äù.", weight:20}
      ]),
      reward:"Runa: Constancia"
    },
    {n:10, title:"Acci√≥n peque√±a #2", phase:"üü£ Expansi√≥n", energy:"üî• Movimiento", symbol:"‚öôÔ∏è Constancia",
      phrase:"Peque√±os pasos, gran direcci√≥n.",
      modules: mods([
        {type:"Acci√≥n", text:"Otra microacci√≥n. Evit√° medir resultados.", weight:50},
        {type:"Registro", text:"¬øQu√© se volvi√≥ m√°s f√°cil entre ayer y hoy?", weight:30},
        {type:"Cierre", text:"Respiraci√≥n 4-4-6 x 5 ciclos.", weight:20}
      ]),
      reward:"Runa: Constancia"
    },
    {n:11, title:"Acci√≥n peque√±a #3", phase:"üü£ Expansi√≥n", energy:"üî• Movimiento", symbol:"‚öôÔ∏è Constancia",
      phrase:"La constancia es mi forma de amar mi futuro.",
      modules: mods([
        {type:"Acci√≥n", text:"Una microacci√≥n que te acerque un paso m√°s.", weight:50},
        {type:"Reflexi√≥n", text:"¬øQu√© me dir√≠a el yo de 12 meses si me viera hoy?", weight:30},
        {type:"Cierre", text:"Peque√±o premio sano (placer lento).", weight:20}
      ]),
      reward:"Runa: Constancia"
    },
    {n:12, title:"Visualizaci√≥n del futuro pleno", phase:"üü£ Expansi√≥n", energy:"üåå Expansiva", symbol:"ü™û Visi√≥n",
      phrase:"Soy libre de qui√©n soy, prisionero de qui√©n voy a ser.",
      modules: mods([
        {type:"Escritura", text:"Describ√≠ tu vida en 12 meses enfoc√°ndote en sensaciones.", weight:40},
        {type:"Imagen", text:"Dibuj√° o crea un mapa/vision board simple.", weight:30},
        {type:"Ritual", text:"Visualiz√° 2 minutos que ya viv√≠s as√≠.", weight:30}
      ]),
      reward:"S√≠mbolo: Visi√≥n"
    },
    {n:13, title:"Creaci√≥n consciente I", phase:"üü£ Expansi√≥n", energy:"üõ† Creativa", symbol:"üß© Construcci√≥n",
      phrase:"Lo que creo, me crea.",
      modules: mods([
        {type:"Dise√±o", text:"Esboz√° tu mini proyecto (texto/ense√±ar/espacio).", weight:35},
        {type:"Acci√≥n", text:"20 minutos de construcci√≥n.", weight:35},
        {type:"Registro", text:"Qu√© aprend√≠ hoy del proceso.", weight:30}
      ]),
      reward:"S√≠mbolo: Construcci√≥n"
    },
    {n:14, title:"Creaci√≥n consciente II", phase:"üü£ Expansi√≥n", energy:"üõ† Creativa", symbol:"üß© Construcci√≥n",
      phrase:"Me expongo a aprender.",
      modules: mods([
        {type:"Iteraci√≥n", text:"Mejora tu mini proyecto (versi√≥n 0.2).", weight:40},
        {type:"Feedback", text:"Ped√≠ opini√≥n a alguien de confianza.", weight:30},
        {type:"Reflexi√≥n", text:"Qu√© cambiar√≠a ma√±ana.", weight:30}
      ]),
      reward:"S√≠mbolo: Construcci√≥n"
    },
    {n:15, title:"Creaci√≥n consciente III", phase:"üü£ Expansi√≥n", energy:"üõ† Creativa", symbol:"üß© Construcci√≥n",
      phrase:"Lo que practico, se vuelve naturaleza.",
      modules: mods([
        {type:"Iteraci√≥n", text:"Versi√≥n 0.3 del mini proyecto.", weight:45},
        {type:"Registro", text:"Qu√© parte me entusiasma m√°s ahora.", weight:25},
        {type:"Ritual", text:"Cierre con 2 min de respiraci√≥n.", weight:30}
      ]),
      reward:"S√≠mbolo: Construcci√≥n"
    },
    {n:16, title:"La incomodidad elegida", phase:"üü£ Expansi√≥n", energy:"‚ö° De salto", symbol:"‚öîÔ∏è Coraje",
      phrase:"El v√©rtigo tambi√©n es se√±al de vida.",
      modules: mods([
        {type:"Identificaci√≥n", text:"Anot√° 3 cosas que evit√°s y te har√≠an crecer.", weight:25},
        {type:"Desaf√≠o", text:"Eleg√≠ una y atravesala hoy.", weight:40},
        {type:"Reflexi√≥n", text:"¬øQu√© parte se resisti√≥ y cu√°l se liber√≥?", weight:20},
        {type:"Cierre", text:"Frase: ‚ÄúMi miedo hoy fue mi puerta‚Äù.", weight:15}
      ]),
      reward:"S√≠mbolo: Coraje"
    },
    {n:17, title:"Placer racional I", phase:"üü£ Expansi√≥n", energy:"üíó Sensitiva", symbol:"üå∫ Disfrute consciente",
      phrase:"El placer lento me devuelve el alma al cuerpo.",
      modules: mods([
        {type:"Experiencia", text:"Eleg√≠ una experiencia placentera lenta y vivila sin pantallas.", weight:45},
        {type:"Registro", text:"Qu√© sent√≠ al no apurar el momento.", weight:30},
        {type:"Cierre", text:"Agradec√© el instante vivido.", weight:25}
      ]),
      reward:"S√≠mbolo: Disfrute consciente"
    },
    {n:18, title:"Placer racional II", phase:"üü£ Expansi√≥n", energy:"üíó Sensitiva", symbol:"üå∫ Disfrute consciente",
      phrase:"Disfrutar tambi√©n es disciplina.",
      modules: mods([
        {type:"Repetici√≥n", text:"Repet√≠ una experiencia lenta distinta de ayer.", weight:45},
        {type:"Comparaci√≥n", text:"Anot√° diferencias con lo instant√°neo.", weight:30},
        {type:"Cierre", text:"Respir√° profundo 5 veces.", weight:25}
      ]),
      reward:"S√≠mbolo: Disfrute consciente"
    },
    {n:19, title:"Cosecha parcial I", phase:"üü£ Expansi√≥n", energy:"üåï Gratitud", symbol:"üåæ Cosecha",
      phrase:"Lo que llam√© aburrimiento, era el alma pidiendo expansi√≥n.",
      modules: mods([
        {type:"Lectura", text:"Le√© lo que escribiste desde el d√≠a 1.", weight:30},
        {type:"Reflexi√≥n", text:"Qu√© cambi√≥ en m√≠ desde que empec√©.", weight:40},
        {type:"Ritual", text:"Una respiraci√≥n profunda por cada avance.", weight:30}
      ]),
      reward:"S√≠mbolo: Cosecha"
    },
    {n:20, title:"Cosecha parcial II", phase:"üü£ Expansi√≥n", energy:"üåï Gratitud", symbol:"üåæ Cosecha",
      phrase:"Sigo eligiendo el camino, incluso cansado.",
      modules: mods([
        {type:"Gesto", text:"Un gesto peque√±o hacia tu desaf√≠o (correo, esquema, 15‚Äô).", weight:40},
        {type:"Registro", text:"Qu√© me mantiene en el camino hoy.", weight:30},
        {type:"Cierre", text:"Mini premio sano.", weight:30}
      ]),
      reward:"S√≠mbolo: Cosecha"
    },
    {n:21, title:"Prop√≥sito en una frase", phase:"üü¢ Integraci√≥n", energy:"üß† Claridad", symbol:"üúÇ Esencia",
      phrase:"Mi prop√≥sito hoy cabe en una frase simple.",
      modules: mods([
        {type:"Escritura", text:"Escrib√≠ tu prop√≥sito actual en una frase.", weight:45},
        {type:"Chequeo", text:"¬øDa paz o castiga? Ajust√° si hiere.", weight:30},
        {type:"Cierre", text:"Le√© la frase en voz alta 3 veces.", weight:25}
      ]),
      reward:"S√≠mbolo: Esencia"
    },
    {n:22, title:"Alinear prop√≥sito", phase:"üü¢ Integraci√≥n", energy:"üß† Claridad", symbol:"üúÇ Esencia",
      phrase:"Mi prop√≥sito me gu√≠a, no me hiere.",
      modules: mods([
        {type:"Pulido", text:"Pul√≠ tu frase-prop√≥sito hasta que suene verdadera.", weight:45},
        {type:"Visibilidad", text:"Pegala donde la veas (cuaderno/tel√©fono).", weight:30},
        {type:"Registro", text:"C√≥mo se siente en el cuerpo leerla.", weight:25}
      ]),
      reward:"S√≠mbolo: Esencia"
    },
    {n:23, title:"H√°bitos ancla", phase:"üü¢ Integraci√≥n", energy:"‚òÄÔ∏è Constancia", symbol:"‚õìÔ∏è Elecci√≥n",
      phrase:"Elijo cadenas que honran mi libertad.",
      modules: mods([
        {type:"Definici√≥n", text:"Eleg√≠ 1 h√°bito ancla (ma√±ana/tarde/noche) para 30 d√≠as.", weight:45},
        {type:"Plan", text:"Escrib√≠ cu√°ndo y c√≥mo lo vas a sostener.", weight:30},
        {type:"Cierre", text:"Primer d√≠a de pr√°ctica.", weight:25}
      ]),
      reward:"S√≠mbolo: Elecci√≥n"
    },
    {n:24, title:"Ritual matinal I", phase:"üü¢ Integraci√≥n", energy:"‚òÄÔ∏è Constancia", symbol:"‚è∞ Ritual",
      phrase:"Despertar es un acto sagrado.",
      modules: mods([
        {type:"Dise√±o", text:"Dise√±√° tu ritual: cuerpo + mente + esp√≠ritu (10‚Äì20 min).", weight:40},
        {type:"Ejecuci√≥n", text:"Aplicalo hoy tal cual.", weight:40},
        {type:"Registro", text:"Qu√© parte te reconecta m√°s.", weight:20}
      ]),
      reward:"S√≠mbolo: Ritual"
    },
    {n:25, title:"Ritual matinal II", phase:"üü¢ Integraci√≥n", energy:"‚òÄÔ∏è Constancia", symbol:"‚è∞ Ritual",
      phrase:"Mi ma√±ana me pertenece.",
      modules: mods([
        {type:"Iteraci√≥n", text:"Ajust√° tu ritual y repetilo.", weight:50},
        {type:"Registro", text:"Qu√© cambiar√≠as para sostenerlo 30 d√≠as.", weight:30},
        {type:"Cierre", text:"Compromiso: lo sostengo aunque est√© cansado.", weight:20}
      ]),
      reward:"S√≠mbolo: Ritual"
    },
    {n:26, title:"Agradecer al caos", phase:"üü¢ Integraci√≥n", energy:"üåô Reflexiva", symbol:"üåÄ Resiliencia",
      phrase:"Gracias, caos, por frenarme a tiempo.",
      modules: mods([
        {type:"Carta", text:"Escrib√≠ una carta al 'bucle' agradeciendo el freno.", weight:45},
        {type:"Reflexi√≥n", text:"¬øQu√© aprend√≠ al perder el control?", weight:30},
        {type:"Ritual", text:"Respir√° profundo 5 veces y solt√°.", weight:25}
      ]),
      reward:"S√≠mbolo: Resiliencia"
    },
    {n:27, title:"Legado I", phase:"üü¢ Integraci√≥n", energy:"üîÜ Inspiradora", symbol:"üìú Huella",
      phrase:"Transmitir es inmortalizar lo aprendido.",
      modules: mods([
        {type:"Dise√±o", text:"Si ense√±aras tu proceso hoy, ¬øqu√© dejar√≠as dicho? (bosquejo)", weight:45},
        {type:"Formato", text:"Eleg√≠ formato: texto, audio o video.", weight:30},
        {type:"Registro", text:"Qu√© te gustar√≠a que alguien reciba de vos.", weight:25}
      ]),
      reward:"S√≠mbolo: Huella"
    },
    {n:28, title:"Legado II", phase:"üü¢ Integraci√≥n", energy:"üîÜ Inspiradora", symbol:"üìú Huella",
      phrase:"Mi proceso vale para alguien m√°s.",
      modules: mods([
        {type:"Compartir", text:"Compart√≠ una parte con alguien de confianza.", weight:45},
        {type:"Reflexi√≥n", text:"C√≥mo te sentiste al exponerte/entregar.", weight:30},
        {type:"Cierre", text:"Anot√° un ajuste o mejora.", weight:25}
      ]),
      reward:"S√≠mbolo: Huella"
    },
    {n:29, title:"Descanso consciente", phase:"üü¢ Integraci√≥n", energy:"üí§ Receptiva", symbol:"üåø Pausa",
      phrase:"Descansar por elecci√≥n tambi√©n es crecer.",
      modules: mods([
        {type:"Descanso", text:"Eleg√≠ una forma de descansar con presencia (peli, siesta, paseo).", weight:60},
        {type:"Higiene", text:"Cero redes/est√≠mulos r√°pidos durante el descanso.", weight:20},
        {type:"Registro", text:"C√≥mo se siente descansar sin culpa.", weight:20}
      ]),
      reward:"S√≠mbolo: Pausa"
    },
    {n:30, title:"Cierre del ciclo", phase:"üü¢ Integraci√≥n", energy:"üåï Plenitud", symbol:"üïäÔ∏è Renacimiento",
      phrase:"No busco el √©xito, busco el sentido. Y en ese sentido, vuelvo a nacer.",
      modules: mods([
        {type:"Lectura", text:"Rele√© tu texto del D√≠a 1.", weight:20},
        {type:"Reflexi√≥n", text:"Escrib√≠: ‚ÄúDespu√©s de esta tormenta, descubr√≠ que‚Ä¶‚Äù", weight:40},
        {type:"Ritual", text:"Encend√© una vela o incienso y cerr√° el ciclo.", weight:25},
        {type:"Gratitud", text:"Agradecete por haber llegado.", weight:15}
      ]),
      reward:"T√≠tulo desbloqueado: Renacido Plenisista"
    }
  ];

  const DEFAULT_STATE = {tasks:{}, streak:0};
  let STATE;
  try{ STATE = JSON.parse(localStorage.getItem(KEY)) || DEFAULT_STATE; } catch(e){ STATE = DEFAULT_STATE; }

  const grid = document.getElementById('grid');
  const barTotal = document.getElementById('barTotal');
  const statPct = document.getElementById('statPct');
  const statDays = document.getElementById('statDays');
  const statStreak = document.getElementById('statStreak');
  document.getElementById('yy').textContent = new Date().getFullYear();

  function save(){ localStorage.setItem(KEY, JSON.stringify(STATE)); }

  function dayProgress(n){
    const key = 'd'+n;
    const tasks = STATE.tasks[key] || {};
    const d = days.find(x=>x.n===n);
    let pct = 0;
    d.modules.forEach((m,i)=>{ if(tasks[i]) pct += m.weight; });
    return Math.max(0, Math.min(100, pct));
  }

  function computeTotals(){
    let done=0, sum=0;
    days.forEach(d => {
      const p = dayProgress(d.n);
      if(p>=100) done++;
      sum += p;
    });
    const totalPct = Math.round(sum / (days.length));
    statPct.textContent = totalPct+'%';
    barTotal.style.width = totalPct+'%';
    statDays.textContent = done+'/'+days.length;
    let st=0;
    for(let i=1;i<=days.length;i++){
      if(dayProgress(i)>=100) st++; else break;
    }
    STATE.streak = st;
    statStreak.textContent = st;
    save();
  }

  function renderGrid(){
    grid.innerHTML = '';
    days.forEach(d => {
      const card = document.createElement('article');
      card.className = 'day';
      const pct = dayProgress(d.n);
      if(pct>=100) card.classList.add('done');
      card.innerHTML = `
        <div class="topline">
          <div class="title">D√≠a ${d.n}</div>
          <div class="badge">${d.phase.split(' ')[0]} ${d.symbol.split(' ')[0]}</div>
        </div>
        <div class="phrase">${d.phrase}</div>
        <div class="actions">
          <span style="color:var(--soft)">${pct}%</span>
          <button class="open" data-open="${d.n}">Abrir</button>
        </div>
        <div class="phase">${d.phase} ¬∑ ${d.energy}</div>
      `;
      grid.appendChild(card);
    });
    attachOpen();
    computeTotals();
  }

  // modal logic
  const backdrop = document.getElementById('backdrop');
  const mTitle = document.getElementById('mTitle');
  const mPhase = document.getElementById('mPhase');
  const mEnergy = document.getElementById('mEnergy');
  const mSymbol = document.getElementById('mSymbol');
  const mPhrase = document.getElementById('mPhrase');
  const modList = document.getElementById('modList');
  const mBar = document.getElementById('mBar');
  const mPct = document.getElementById('mPct');
  const mReward = document.getElementById('mReward');

  let currentDay = 1;

  function attachOpen(){
    grid.querySelectorAll('button[data-open]').forEach(b => {
      b.addEventListener('click', ()=> openDay(parseInt(b.getAttribute('data-open'),10)));
    });
  }

  function openDay(n){
    currentDay = n;
    const d = days.find(x=>x.n===n);
    mTitle.textContent = `D√≠a ${d.n} ‚Äî ${d.title}`;
    mPhase.textContent = d.phase;
    mEnergy.textContent = d.energy;
    mSymbol.textContent = d.symbol;
    mPhrase.textContent = '‚Äú'+d.phrase+'‚Äù';
    mReward.textContent = (dayProgress(n)>=100) ? d.reward : '';

    // modules
    modList.innerHTML = '';
    const key = 'd'+n;
    const tasks = STATE.tasks[key] || {};
    d.modules.forEach((m,i)=>{
      const box = document.createElement('div');
      box.className = 'mod';
      box.innerHTML = `
        <h3>${m.type}</h3>
        <p>${m.text}</p>
        <div class="small">Peso: ${m.weight}%</div>
        <label class="check">
          <input type="checkbox" data-mod="${i}" ${tasks[i]?'checked':''}>
          <span>Hecho</span>
        </label>
      `;
      modList.appendChild(box);
    });
    modList.querySelectorAll('input[type="checkbox"]').forEach(cb => {
      cb.addEventListener('change', (e)=>{
        const idx = e.target.getAttribute('data-mod');
        const key = 'd'+currentDay;
        STATE.tasks[key] = STATE.tasks[key] || {};
        STATE.tasks[key][idx] = e.target.checked;
        save();
        updateModalProgress();
        renderGrid();
      });
    });

    updateModalProgress();
    backdrop.style.display = 'grid';
    backdrop.setAttribute('aria-hidden','false');
  }

  function updateModalProgress(){
    const pct = dayProgress(currentDay);
    mBar.style.width = pct+'%';
    mPct.textContent = pct+'%';
    const d = days.find(x=>x.n===currentDay);
    mReward.textContent = (pct>=100)? d.reward : '';
  }

  document.getElementById('mClose').addEventListener('click', closeModal);
  document.getElementById('backdrop').addEventListener('click', (e)=>{ if(e.target===backdrop) closeModal(); });
  function closeModal(){ backdrop.style.display='none'; backdrop.setAttribute('aria-hidden','true'); }

  // controls top
  document.getElementById('btnReset').addEventListener('click', ()=>{
    if(confirm('¬øReiniciar todo el progreso?')){
      localStorage.removeItem(KEY); location.reload();
    }
  });
  document.getElementById('btnExport').addEventListener('click', ()=>{
    const payload = JSON.stringify(STATE, null, 2);
    const blob = new Blob([payload], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'renacimiento-plenisista-export.json';
    document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  });
  document.getElementById('btnToday').addEventListener('click', ()=>{
    const now = new Date();
    const diff = Math.floor((now - START_DATE)/(1000*60*60*24));
    let idx = (diff>=0 && diff<days.length)? diff+1 : 1;
    openDay(idx);
  });

  // initial render
  renderGrid();
})();
</script>
</body>
</html>
